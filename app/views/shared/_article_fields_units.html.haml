-# var parcel = $($.parseHTML("#{escape_javascript(render('shared/parcel'))}"));
-# var parcels = #{raw @parcels.to_json};

%div.overflow-hidden.form-group
  = f.hidden_field :unit, id: 'article_unit_hidden', value: ''
  -# title: unit in which article can be ordered from supplier
  - supplier_order_unit_override = article.supplier_order_unit
  - supplier_order_unit_override = 'XPP' if supplier_order_unit_override.nil? && article.unit.nil?
  %label.control-label.col-sm-3{for: 'article_version_supplier_order_unit'}
    = ArticleVersion.human_attribute_name(:supplier_order_unit)
  .col-sm-9.d-flex
    = f.select :supplier_order_unit, @article_units, selected: supplier_order_unit_override, include_blank: t('.custom_unit'), html: {class: 'form-control d-flex', style: 'width: 150px;'}, class: 'flex-1'
    -# title: free text unit
    = f.input_field :unit, class: 'form-control ml-1', placeholder: t('.unit')
    %i.glyphicon.glyphicon-warning-sign{title: t('.warn_about_needless_custom_unit')}
%div
  .form-group.d-flex.w-full
    %label.control-label.col-sm-3
      = t('.unit_ratios')
    %table#fc_base_price{:class => "col-sm-9 "}
      %tbody
        - ratios = article.article_unit_ratios
        = render :partial => 'shared/article_unit_ratio', :as => 'article_unit_ratio', :collection => ratios, locals: {f: f}
      %tfoot
        %td{:colspan => 9, :style => 'padding-left: 22px; padding-bottom: 16px; padding-top: 16px'}
          = link_to t('.add_ratio'), '#', 'data-add-ratio' => true, class: 'btn btn-primary', title: "add ratio"
%div
  = f.input :minimum_order_quantity do
    .input-group
      = f.input_field :minimum_order_quantity, class: 'form-control'
      %span.input-group-addon
%div
  = f.input :billing_unit, as: :select, collection: [], input_html: {'data-initial-value': article.billing_unit, class: 'input-group'}, include_blank: false, wrapper_html: { class: 'd-flex unit-wrapper' }
.overflow-hidden.form-group
  %label.control-label.col-sm-3{for: 'article_version_group_order_granularity'}
    = ArticleVersion.human_attribute_name(:group_order_granularity)
  .col-sm-9.d-flex
    .input-group.unit-wrapper
      = f.input_field :group_order_granularity, class: 'form-control mr-2', step: 0.001, style: 'width: 150px;'
      -# width:50px;text-align: center;
      .ml-1.d-flex.align-items-center
        %span.mr-2.control-label
          = '&times;'.html_safe
        = f.select :group_order_unit, [], {include_blank: false}, {class: 'form-control', style: 'margin-right:12px', 'data-initial-value': article.group_order_unit}

-# var parcel = $($.parseHTML("#{escape_javascript(render('shared/parcel'))}"));
-# var parcels = #{raw @parcels.to_json};

.d-flex
  = f.hidden_field :unit, id: 'article_unit_hidden', value: ''
  -# title: unit in which article can be ordered from supplier
  - supplier_order_unit_override = article.supplier_order_unit
  - supplier_order_unit_override = 'XPP' if supplier_order_unit_override.nil? && article.unit.nil?
  = f.input :supplier_order_unit, as: :select, collection: @article_units, selected: supplier_order_unit_override, include_blank: t('.custom_unit'), label_html: { style:"width:400px"}, input_html: {class: 'form-control d-flex', style:'width:410px'}, wrapper_html: { class: 'd-flex w-full' }
  %i.glyphicon.glyphicon-warning-sign{title: t('.warn_about_needless_custom_unit')}
-# title: free text unit
%div
  .col-sm-3
    = ""
  .col-sm-9
    = f.input :unit, input_html: {class: 'form-control ml-1', placeholder: t('.unit')}, label: false, wrapper: :inline_form
%div
  .form-group.d-flex.w-full
    %label.control-label.col-sm-3
      = t('.unit_ratios')
    %table#fc_base_price{:class => "col-sm-9 "}
      %tbody
        - ratios = article.article_unit_ratios
        = render :partial => 'shared/article_unit_ratio', :as => 'article_unit_ratio', :collection => ratios, locals: {f: f}
      %tfoot
        %td{:colspan => 9, :style => 'padding-left: 22px; padding-bottom: 16px; padding-top: 16px'}
          = link_to t('.add_ratio'), '#', 'data-add-ratio' => true, class: 'btn btn-primary', title: "add ratio"
%div
  = f.input :minimum_order_quantity do
    .input-group
      = f.input_field :minimum_order_quantity, class: 'form-control'
      %span.input-group-addon
  = f.input :maximum_order_quantity do
    .input-group
      = f.input_field :maximum_order_quantity, class: 'form-control'
      %span.input-group-addon
%div
  = f.input :billing_unit, as: :select, collection: [], input_html: {'data-initial-value': article.billing_unit, class: 'input-group'}, include_blank: false, wrapper_html: { class: 'd-flex unit-wrapper' }
.row
  .col-sm-6
    = f.input :group_order_granularity, wrapper: :custom_form, label_html: { class: 'col-sm-12', style: "width:370px"}, input_html: {class: 'form-control col-sm-3', step: 0.001}, wrapper_html: { class: 'd-flex', }
  .col-sm-6
    = f.input :group_order_unit, as: :select, wrapper: :custom_form, collection: [], label_html: { style: "width:50px;text-align: center; "}, input_html: {'data-initial-value': article.group_order_unit, class: 'input-group', style: 'margin-right:12px'}, label: '&times;'.html_safe, include_blank: false, wrapper_html: { class: 'd-flex unit-wrapper'}

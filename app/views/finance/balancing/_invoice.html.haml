- if invoice
  %table
    %tr
      %td= t('.invoice_number')
      %td= invoice.number
    %tr
      %td= t('.invoice_date')
      %td= invoice.date
    %tr
      %td= t('.invoice_amount')
      %td.curreny= number_to_currency invoice.amount
    %tr
      %td= t('.minus_refund_calculated')
      %td.curreny= number_to_currency invoice.deposit
    %tr
      %td= t('.plus_refund_credited')
      %td.curreny= number_to_currency invoice.deposit_credit
    %tr
      %td= t('.refund_adjusted_amount')
      %td.curreny= number_to_currency invoice.net_amount

    - n_orders = invoice.orders.count
    - n_deliveries = invoice.deliveries.count
    - if n_orders > 1
      %tr
        %td= t('.orders')
        %td.numeric=  n_orders.to_s 
    - if n_deliveries > 0
      %tr
        %td= t('.deliveries')
        %td.numeric=  n_deliveries.to_s
             
    - profit_without_markup = invoice.profit(:without_markup)
    - profit_with_markup = invoice.profit(:with_markup)
    %tr
      %td
        = t('.fc_profit')
        - if profit_with_markup > profit_without_markup
          %small= t('.without_extra_charge')
        - else
          = ':'
      %td.numeric= format_currency_difference(profit_without_markup) 
    - if profit_with_markup > profit_without_markup
      %tr
        %td
          = t('.fc_profit')
          %small= t('.with_extra_charge')        
        %td#order_profit.numeric= format_currency_difference(profit_with_markup)

  %br/
  = link_to t('.view'), finance_invoice_path(invoice), class: 'btn'   
  = link_to t('.edit'), edit_finance_invoice_path(invoice), class: 'btn' 

- else
  = t '.new_body'
  = link_to t('.new'), new_finance_invoice_path(:order_id => @order, :supplier_id => @order.supplier)
